// data/analogTestData.js
// Test data for analog-based abilities testing
// This simulates 10 previous analogs with realistic progression

export const ANALOG_TEST_DATA = {
  metadata: {
    totalAnalogs: 10,
    analogRange: { min: 1, max: 10 },
    description: "Test data for analog-based abilities",
    generatedFor: "Yeti and location ability testing",
    dataVersion: "1.0.0",
    lastUpdated: "2024-01-01"
  },
  
  analogs: [
    {
      id: 1,
      startingLifetimeSnowballs: 0,
      endingLifetimeSnowballs: 1000000000,
      endingSnowballWallet: 1000000,
      endingSPS: 1,
      iciclesGenerated: 100,
      snowflakesPurchased: 100,
      // Calculated fields
      totalSnowballsGenerated: 1000000000, // ending - starting
      assistants: {
        additionalArm: 100,
        neighborKids: 100,
        ballMachine: 100,
        polarBearFamily: 100,
        snowBlower: 100,
        hockeyTeam: 100,
        iglooArsenal: 100,
        golfingRange: 100,
        snowstorm: 100,
        snowPrincess: 100,
        winterFortress: 100,
        wizardBlizzard: 100,
        avalanche: 100,
        snowHurricane: 100,
        iceDragon: 100,
        frostGiant: 100,
        orbitalSnowCannon: 100,
        templeofWinter: 100,
        cryoCore: 100,
        snowSingularity: 100
      }
    },
    {
      id: 2,
      startingLifetimeSnowballs: 1000000000,
      endingLifetimeSnowballs: 2000000000,
      endingSnowballWallet: 2000000,
      endingSPS: 200,
      iciclesGenerated: 200,
      snowflakesPurchased: 200,
      // Calculated fields
      totalSnowballsGenerated: 2000000000, // ending - starting
      assistants: {
        additionalArm: 200,
        neighborKids: 200,
        ballMachine: 200,
        polarBearFamily: 200,
        snowBlower: 200,
        hockeyTeam: 200,
        iglooArsenal: 200,
        golfingRange: 200,
        snowstorm: 200,
        snowPrincess: 200,
        winterFortress: 200,
        wizardBlizzard: 200,
        avalanche: 200,
        snowHurricane: 200,
        iceDragon: 200,
        frostGiant: 200,
        orbitalSnowCannon: 200,
        templeofWinter: 200,
        cryoCore: 200,
        snowSingularity: 200
      }
    },
    {
      id: 3,
      startingLifetimeSnowballs: 2000000000,
      endingLifetimeSnowballs: 3000000000,
      endingSnowballWallet: 3000000,
      endingSPS: 300,
      iciclesGenerated: 300,
      snowflakesPurchased: 300,
      // Calculated fields
      totalSnowballsGenerated: 3000000000, // ending - starting
      assistants: {
        additionalArm: 300,
        neighborKids: 300,
        ballMachine: 300,
        polarBearFamily: 300,
        snowBlower: 300,
        hockeyTeam: 300,
        iglooArsenal: 300,
        golfingRange: 300,
        snowstorm: 300,
        snowPrincess: 300,
        winterFortress: 300,
        wizardBlizzard: 300,
        avalanche: 300,
        snowHurricane: 300,
        iceDragon: 300,
        frostGiant: 300,
        orbitalSnowCannon: 300,
        templeofWinter: 300,
        cryoCore: 300,
        snowSingularity: 300
      }
    },
    {
      id: 4,
      startingLifetimeSnowballs: 3000000000,
      endingLifetimeSnowballs: 4000000000,
      endingSnowballWallet: 4000000,
      endingSPS: 400,
      iciclesGenerated: 400,
      snowflakesPurchased: 400,
      // Calculated fields
      totalSnowballsGenerated: 4000000000, // ending - starting
      assistants: {
        additionalArm: 400,
        neighborKids: 400,
        ballMachine: 400,
        polarBearFamily: 400,
        snowBlower: 400,
        hockeyTeam: 400,
        iglooArsenal: 400,
        golfingRange: 400,
        snowstorm: 400,
        snowPrincess: 400,
        winterFortress: 400,
        wizardBlizzard: 400,
        avalanche: 400,
        snowHurricane: 400,
        iceDragon: 400,
        frostGiant: 400,
        orbitalSnowCannon: 400,
        templeofWinter: 400,
        cryoCore: 400,
        snowSingularity: 400
      }
    },
    {
      id: 5,
      startingLifetimeSnowballs: 4000000000,
      endingLifetimeSnowballs: 5000000000,
      endingSnowballWallet: 5000000,
      endingSPS: 500,
      iciclesGenerated: 500,
      snowflakesPurchased: 500,
      // Calculated fields
      totalSnowballsGenerated: 5000000000, // ending - starting
      assistants: {
        additionalArm: 500,
        neighborKids: 500,
        ballMachine: 500,
        polarBearFamily: 500,
        snowBlower: 500,
        hockeyTeam: 500,
        iglooArsenal: 500,
        golfingRange: 500,
        snowstorm: 500,
        snowPrincess: 500,
        winterFortress: 500,
        wizardBlizzard: 500,
          avalanche: 500,
        snowHurricane: 500,
        iceDragon: 500,
        frostGiant: 500,
        orbitalSnowCannon: 500,
        templeofWinter: 500,
        cryoCore: 500,
        snowSingularity: 500
      }
    },
    {
      id: 6,
      startingLifetimeSnowballs: 5000000000,
      endingLifetimeSnowballs: 6000000000,
      endingSnowballWallet: 6000000,
      endingSPS: 600,
      iciclesGenerated: 600,
      snowflakesPurchased: 600,
      // Calculated fields
      totalSnowballsGenerated: 6000000000, // ending - starting
      assistants: {
        additionalArm: 600,
        neighborKids: 600,
        ballMachine: 600,
        polarBearFamily: 600,
        snowBlower: 600,
        hockeyTeam: 600,
        iglooArsenal: 600,
        golfingRange: 600,
        snowstorm: 600,
        snowPrincess: 600,
        winterFortress: 600,
        wizardBlizzard: 600,
        avalanche: 600,
        snowHurricane: 600,
        iceDragon: 600,
        frostGiant: 600,
            orbitalSnowCannon: 600,
        templeofWinter: 600,
        cryoCore: 600,
        snowSingularity: 600
      }
    },
    {
      id: 7,
      startingLifetimeSnowballs: 6000000000,
      endingLifetimeSnowballs: 7000000000,
      endingSnowballWallet: 7000000,
      endingSPS: 700,
      iciclesGenerated: 700,
      snowflakesPurchased: 700,
      // Calculated fields
      totalSnowballsGenerated: 7000000000, // ending - starting
      assistants: {
        additionalArm: 700,
        neighborKids: 700,
        ballMachine: 700,
        polarBearFamily: 700,
        snowBlower: 700,
        hockeyTeam: 700,
        iglooArsenal: 700,
        golfingRange: 700,
        snowstorm: 700,
        snowPrincess: 700,
        winterFortress: 700,
        wizardBlizzard: 700,
        avalanche: 700,
        snowHurricane: 700,
        iceDragon: 700,
        frostGiant: 700,
          orbitalSnowCannon: 700,
        templeofWinter: 700,
        cryoCore: 700,
        snowSingularity: 700
      }
    },
    {
      id: 8,
      startingLifetimeSnowballs: 7000000000,
      endingLifetimeSnowballs: 8000000000,
      endingSnowballWallet: 8000000,
      endingSPS: 800,
      iciclesGenerated: 800,
      snowflakesPurchased: 800,
      // Calculated fields
      totalSnowballsGenerated: 8000000000, // ending - starting
      assistants: {
        additionalArm: 800,
        neighborKids: 800,
        ballMachine: 800,
        polarBearFamily: 800,
        snowBlower: 800,
        hockeyTeam: 800,
        iglooArsenal: 800,
        golfingRange: 800,
        snowstorm: 800,
        snowPrincess: 800,
        winterFortress: 800,
        wizardBlizzard: 800,
        avalanche: 800,
        snowHurricane: 800,
        iceDragon: 800,
        frostGiant: 800,
          orbitalSnowCannon: 800,
        templeofWinter: 800,
        cryoCore: 800,
        snowSingularity: 800
      }
    },
    {
      id: 9,
      startingLifetimeSnowballs: 8000000000,
      endingLifetimeSnowballs: 9000000000,
      endingSnowballWallet: 9000000,
      endingSPS: 900,
      iciclesGenerated: 900,
      snowflakesPurchased: 900,
      // Calculated fields
      totalSnowballsGenerated: 9000000000, // ending - starting
      assistants: {
        additionalArm: 900,
        neighborKids: 900,
        ballMachine: 900,
        polarBearFamily: 900,
        snowBlower: 900,
        hockeyTeam: 900,
        iglooArsenal: 900,
        golfingRange: 900,
        snowstorm: 900,
        snowPrincess: 900,
        winterFortress: 900,
        wizardBlizzard: 900,
        avalanche: 900,
        snowHurricane: 900,
        iceDragon: 900,
        frostGiant: 900,
          orbitalSnowCannon: 900,
        templeofWinter: 900,
        cryoCore: 900,
        snowSingularity: 900
      }
    },
    {
      id: 10,
      startingLifetimeSnowballs: 9000000000,
      endingLifetimeSnowballs: 10000000000,
      endingSnowballWallet: 10000000,
      endingSPS: 1000,
      iciclesGenerated: 1000,
      snowflakesPurchased: 1000,
      // Calculated fields
      totalSnowballsGenerated: 1000000000, // ending - starting
      assistants: {
        additionalArm: 1000,
        neighborKids: 1000,
        ballMachine: 1000,
        polarBearFamily: 1000,
        snowBlower: 1000,
        hockeyTeam: 1000,
        iglooArsenal: 1000,
        golfingRange: 1000,
        snowstorm: 1000,
        snowPrincess: 1000,
        winterFortress: 1000,
        wizardBlizzard: 1000,
        avalanche: 1000,
        snowHurricane: 1000,
        iceDragon: 1000,
        frostGiant: 1000,
        orbitalSnowCannon: 10,
        templeofWinter: 10,
        cryoCore: 10,
        snowSingularity: 10
      }
    }
  ]
};

// Helper function to get total assistant count for an analog
export function getTotalAssistantCount(analogData) {
  return Object.values(analogData.assistants).reduce((total, count) => total + count, 0);
}

// Helper function to get analog by ID
export function getAnalogById(id) {
  return ANALOG_TEST_DATA.analogs.find(analog => analog.id === id);
}

// Helper function to get random previous analog
export function getRandomPreviousAnalog(currentAnalogId = 11) {
  const availableAnalogs = ANALOG_TEST_DATA.analogs.filter(analog => analog.id < currentAnalogId);
  if (availableAnalogs.length === 0) return null;
  
  const randomIndex = Math.floor(Math.random() * availableAnalogs.length);
  return availableAnalogs[randomIndex];
}

// Helper function to get analogs in a range
export function getAnalogsByRange(startId, endId) {
  return ANALOG_TEST_DATA.analogs.filter(analog => analog.id >= startId && analog.id <= endId);
}

// Helper function to get one random analog from the top half of producing analogs
export function getTopAnalogs(currentAnalogId = 11) {
  const availableAnalogs = ANALOG_TEST_DATA.analogs.filter(analog => analog.id < currentAnalogId);
  if (availableAnalogs.length === 0) return null;
  
  // Sort by total snowballs generated (descending)
  const sorted = availableAnalogs.sort((a, b) => b.totalSnowballsGenerated - a.totalSnowballsGenerated);
  
  // Get the top half of analogs
  const topHalfCount = Math.ceil(sorted.length / 2);
  const topHalf = sorted.slice(0, topHalfCount);
  
  // Return one random analog from the top half
  const randomIndex = Math.floor(Math.random() * topHalf.length);
  return topHalf[randomIndex];
}

// Helper function to get two random analogs
export function getTwoRandomAnalogs(currentAnalogId = 11) {
  const availableAnalogs = ANALOG_TEST_DATA.analogs.filter(analog => analog.id < currentAnalogId);
  if (availableAnalogs.length === 0) return [];
  
  // If we have less than 2 analogs, return all available
  if (availableAnalogs.length <= 2) {
    return availableAnalogs;
  }
  
  // Get two random unique analogs
  const shuffled = [...availableAnalogs].sort(() => Math.random() - 0.5);
  return shuffled.slice(0, 2);
}

// Helper function to get average analog data
export function getAverageAnalog(currentAnalogId = 11) {
  const availableAnalogs = ANALOG_TEST_DATA.analogs.filter(analog => analog.id < currentAnalogId);
  if (availableAnalogs.length === 0) return null;
  
  // Calculate averages for all relevant fields
  const totalAnalogs = availableAnalogs.length;
  
  // Average assistants
  const avgAssistants = {};
  const assistantKeys = Object.keys(availableAnalogs[0].assistants);
  
  for (const key of assistantKeys) {
    const total = availableAnalogs.reduce((sum, analog) => sum + analog.assistants[key], 0);
    avgAssistants[key] = Math.floor(total / totalAnalogs);
  }
  
  // Create average analog object
  const avgAnalog = {
    id: 'average',
    startingLifetimeSnowballs: Math.floor(availableAnalogs.reduce((sum, analog) => sum + analog.startingLifetimeSnowballs, 0) / totalAnalogs),
    endingLifetimeSnowballs: Math.floor(availableAnalogs.reduce((sum, analog) => sum + analog.endingLifetimeSnowballs, 0) / totalAnalogs),
    endingSnowballWallet: Math.floor(availableAnalogs.reduce((sum, analog) => sum + analog.endingSnowballWallet, 0) / totalAnalogs),
    endingSPS: Math.floor(availableAnalogs.reduce((sum, analog) => sum + analog.endingSPS, 0) / totalAnalogs),
    iciclesGenerated: Math.floor(availableAnalogs.reduce((sum, analog) => sum + analog.iciclesGenerated, 0) / totalAnalogs),
    snowflakesPurchased: Math.floor(availableAnalogs.reduce((sum, analog) => sum + analog.snowflakesPurchased, 0) / totalAnalogs),
    totalSnowballsGenerated: Math.floor(availableAnalogs.reduce((sum, analog) => sum + analog.totalSnowballsGenerated, 0) / totalAnalogs),
    assistants: avgAssistants
  };
  
  return avgAnalog;
}

// Helper function to get summary statistics
export function getAnalogSummaryStats() {
  const analogs = ANALOG_TEST_DATA.analogs;
  
  return {
    totalAnalogs: analogs.length,
    totalSnowballsGenerated: analogs.reduce((sum, analog) => sum + analog.totalSnowballsGenerated, 0),
    totalAssistants: analogs.reduce((sum, analog) => sum + getTotalAssistantCount(analog), 0),
    avgSPS: analogs.reduce((sum, analog) => sum + analog.endingSPS, 0) / analogs.length,
    totalIcicles: analogs.reduce((sum, analog) => sum + analog.iciclesGenerated, 0),
    totalSnowflakes: analogs.reduce((sum, analog) => sum + analog.snowflakesPurchased, 0)
  };
}